        -:    0:Source:/home/workspace/lib/checkunusedfunctions.h
        -:    0:Graph:/home/workspace/build/lib/CMakeFiles/lib_objs.dir/cppcheck.gcno
        -:    0:Data:/home/workspace/build/lib/CMakeFiles/lib_objs.dir/cppcheck.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:/*
        -:    2: * Cppcheck - A tool for static C/C++ code analysis
        -:    3: * Copyright (C) 2007-2019 Cppcheck team.
        -:    4: *
        -:    5: * This program is free software: you can redistribute it and/or modify
        -:    6: * it under the terms of the GNU General Public License as published by
        -:    7: * the Free Software Foundation, either version 3 of the License, or
        -:    8: * (at your option) any later version.
        -:    9: *
        -:   10: * This program is distributed in the hope that it will be useful,
        -:   11: * but WITHOUT ANY WARRANTY; without even the implied warranty of
        -:   12: * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        -:   13: * GNU General Public License for more details.
        -:   14: *
        -:   15: * You should have received a copy of the GNU General Public License
        -:   16: * along with this program.  If not, see <http://www.gnu.org/licenses/>.
        -:   17: */
        -:   18:
        -:   19:
        -:   20://---------------------------------------------------------------------------
        -:   21:#ifndef checkunusedfunctionsH
        -:   22:#define checkunusedfunctionsH
        -:   23://---------------------------------------------------------------------------
        -:   24:
        -:   25:#include "check.h"
        -:   26:#include "config.h"
        -:   27:
        -:   28:#include <list>
        -:   29:#include <map>
        -:   30:#include <set>
        -:   31:#include <string>
        -:   32:
        -:   33:class ErrorLogger;
        -:   34:class Function;
        -:   35:class Settings;
        -:   36:class Tokenizer;
        -:   37:
        -:   38:/// @addtogroup Checks
        -:   39:/** @brief Check for functions never called */
        -:   40:/// @{
        -:   41:
function _ZN20CheckUnusedFunctionsD0Ev called 0 returned 0% blocks executed 0%
function _ZN20CheckUnusedFunctionsD2Ev called 0 returned 0% blocks executed 0%
    #####:   42:class CPPCHECKLIB CheckUnusedFunctions : public Check {
call    0 never executed
call    1 never executed
call    2 never executed
call    3 never executed
call    4 never executed
call    5 never executed
        -:   43:public:
        -:   44:    /** @brief This constructor is used when registering the CheckUnusedFunctions */
        -:   45:    CheckUnusedFunctions() : Check(myName()) {
        -:   46:    }
        -:   47:
        -:   48:    /** @brief This constructor is used when running checks. */
function _ZN20CheckUnusedFunctionsC2EPK9TokenizerPK8SettingsP11ErrorLogger called 0 returned 0% blocks executed 0%
    #####:   49:    CheckUnusedFunctions(const Tokenizer *tokenizer, const Settings *settings, ErrorLogger *errorLogger)
    #####:   50:        : Check(myName(), tokenizer, settings, errorLogger) {
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
call    6 never executed
call    7 never executed
call    8 never executed
    #####:   51:    }
        -:   52:
        -:   53:    static void clear() {
        -:   54:        instance.mFunctions.clear();
        -:   55:        instance.mFunctionCalls.clear();
        -:   56:    }
        -:   57:
        -:   58:    // Parse current tokens and determine..
        -:   59:    // * Check what functions are used
        -:   60:    // * What functions are declared
        -:   61:    void parseTokens(const Tokenizer &tokenizer, const char FileName[], const Settings *settings);
        -:   62:
        -:   63:    // Return true if an error is reported.
        -:   64:    bool check(ErrorLogger * const errorLogger, const Settings& settings);
        -:   65:
        -:   66:    /** @brief Parse current TU and extract file info */
        -:   67:    Check::FileInfo *getFileInfo(const Tokenizer *tokenizer, const Settings *settings) const OVERRIDE;
        -:   68:
        -:   69:    /** @brief Analyse all file infos for all TU */
        -:   70:    bool analyseWholeProgram(const CTU::FileInfo *ctu, const std::list<Check::FileInfo*> &fileInfo, const Settings& settings, ErrorLogger &errorLogger) OVERRIDE;
        -:   71:
        -:   72:    static CheckUnusedFunctions instance;
        -:   73:
        -:   74:    std::string analyzerInfo() const;
        -:   75:
        -:   76:    /** @brief Combine and analyze all analyzerInfos for all TUs */
        -:   77:    static void analyseWholeProgram(ErrorLogger * const errorLogger, const std::string &buildDir);
        -:   78:
        -:   79:private:
        -:   80:
        -:   81:    void getErrorMessages(ErrorLogger *errorLogger, const Settings *settings) const OVERRIDE {
        -:   82:        CheckUnusedFunctions c(nullptr, settings, errorLogger);
        -:   83:        c.unusedFunctionError(errorLogger, emptyString, 0, "funcName");
        -:   84:    }
        -:   85:
        -:   86:    void runChecks(const Tokenizer * /*tokenizer*/, const Settings * /*settings*/, ErrorLogger * /*errorLogger*/) OVERRIDE {}
        -:   87:
        -:   88:    /**
        -:   89:     * Dummy implementation, just to provide error for --errorlist
        -:   90:     */
        -:   91:    static void unusedFunctionError(ErrorLogger * const errorLogger,
        -:   92:                                    const std::string &filename, unsigned int lineNumber,
        -:   93:                                    const std::string &funcname);
        -:   94:
function _ZN20CheckUnusedFunctions6myNameB5cxx11Ev called 0 returned 0% blocks executed 0%
    #####:   95:    static std::string myName() {
    #####:   96:        return "Unused functions";
call    0 never executed
call    1 never executed
branch  2 never executed
branch  3 never executed
call    4 never executed
call    5 never executed
        -:   97:    }
        -:   98:
        -:   99:    std::string classInfo() const OVERRIDE {
        -:  100:        return "Check for functions that are never called\n";
        -:  101:    }
        -:  102:
function _ZN20CheckUnusedFunctions13FunctionUsageD2Ev called 0 returned 0% blocks executed 0%
    #####:  103:    class CPPCHECKLIB FunctionUsage {
call    0 never executed
        -:  104:    public:
        -:  105:        FunctionUsage() : lineNumber(0), usedSameFile(false), usedOtherFile(false) {
        -:  106:        }
        -:  107:
        -:  108:        std::string filename;
        -:  109:        unsigned int lineNumber;
        -:  110:        bool   usedSameFile;
        -:  111:        bool   usedOtherFile;
        -:  112:    };
        -:  113:
        -:  114:    std::map<std::string, FunctionUsage> mFunctions;
        -:  115:
function _ZN20CheckUnusedFunctions12FunctionDeclD2Ev called 0 returned 0% blocks executed 0%
    #####:  116:    class CPPCHECKLIB FunctionDecl {
call    0 never executed
        -:  117:    public:
        -:  118:        explicit FunctionDecl(const Function *f);
        -:  119:        std::string functionName;
        -:  120:        unsigned int lineNumber;
        -:  121:    };
        -:  122:    std::list<FunctionDecl> mFunctionDecl;
        -:  123:    std::set<std::string> mFunctionCalls;
        -:  124:};
        -:  125:/// @}
        -:  126://---------------------------------------------------------------------------
        -:  127:#endif // checkunusedfunctionsH
